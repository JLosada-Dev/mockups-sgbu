<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mis Reservas - SGBU</title>
    <link rel="stylesheet" href="../../assets/css/styles.css" />
    <style>
      /* Reservations Page Styles */
      .reservations-summary {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
      }

      .summary-card {
        background: white;
        border: 1px solid var(--border-color);
        border-radius: 12px;
        padding: 1.5rem;
        display: flex;
        align-items: center;
        gap: 1rem;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .summary-card::before {
        content: '';
        position: absolute;
        left: 0;
        top: 0;
        width: 4px;
        height: 100%;
        background: var(--card-color);
      }

      .summary-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      }

      .summary-icon {
        width: 56px;
        height: 56px;
        border-radius: 50%;
        background: var(--icon-bg);
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
      }

      .summary-content h3 {
        margin: 0;
        font-size: 2rem;
        font-weight: 700;
        color: var(--card-color);
        line-height: 1;
      }

      .summary-content p {
        margin: 0.5rem 0 0 0;
        color: var(--text-secondary);
        font-size: 0.9rem;
      }

      .reservation-card {
        padding: 1.5rem;
        border: 2px solid var(--border-color);
        border-radius: 12px;
        margin-bottom: 1.5rem;
        background: white;
        transition: all 0.3s ease;
      }

      .reservation-card:hover {
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        transform: translateY(-2px);
      }

      .reservation-card.ready {
        border-color: var(--success-color);
        background: linear-gradient(
          135deg,
          rgba(16, 185, 129, 0.02) 0%,
          white 100%
        );
      }

      .reservation-card.waiting {
        border-color: var(--warning-color);
        background: linear-gradient(
          135deg,
          rgba(245, 158, 11, 0.02) 0%,
          white 100%
        );
      }

      .reservation-card.expired {
        border-color: var(--error-color);
        background: linear-gradient(
          135deg,
          rgba(239, 68, 68, 0.02) 0%,
          white 100%
        );
      }

      .reservation-grid {
        display: grid;
        grid-template-columns: 1fr auto;
        gap: 2rem;
        align-items: start;
      }

      .reservation-details {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 1rem;
        margin: 1rem 0;
      }

      .detail-item {
        padding: 0.75rem;
        background: var(--surface-color);
        border-radius: 8px;
      }

      .detail-item strong {
        display: block;
        color: var(--text-secondary);
        font-size: 0.85rem;
        margin-bottom: 0.25rem;
      }

      .status-alert {
        padding: 1rem;
        border-radius: 12px;
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 0.75rem;
        font-weight: 500;
      }

      .status-alert.ready {
        background: linear-gradient(
          135deg,
          var(--success-color) 0%,
          #059669 100%
        );
        color: white;
      }

      .status-alert.waiting {
        background: linear-gradient(
          135deg,
          var(--warning-color) 0%,
          #d97706 100%
        );
        color: white;
      }

      .status-alert.expired {
        background: linear-gradient(
          135deg,
          var(--error-color) 0%,
          #dc2626 100%
        );
        color: white;
      }

      .rules-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 2rem;
      }

      .rule-section {
        padding: 1.5rem;
        background: var(--surface-color);
        border-radius: 12px;
        border-left: 4px solid var(--primary-color);
      }

      .rule-section h4 {
        margin: 0 0 1rem 0;
        color: var(--primary-color);
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .rule-section ul {
        margin: 0;
        padding-left: 1.25rem;
      }

      .rule-section ul li {
        margin-bottom: 0.5rem;
        color: var(--text-primary);
      }

      @media (max-width: 967px) {
        .reservations-summary {
          grid-template-columns: repeat(2, 1fr);
        }

        .reservation-grid {
          grid-template-columns: 1fr;
          gap: 1.5rem;
        }
      }

      @media (max-width: 600px) {
        .reservations-summary {
          grid-template-columns: 1fr;
        }

        .reservation-details {
          grid-template-columns: 1fr;
        }

        .rules-grid {
          grid-template-columns: 1fr;
        }

        .table-container {
          overflow-x: auto;
        }
      }
    </style>
  </head>
  <body>
    <header class="navbar">
      <div class="navbar-container">
        <a href="../../index.html" class="navbar-brand"
          >SGBU - Fundación Universitaria de Popayán</a
        >

        <nav class="navbar-nav-desktop">
          <ul class="navbar-nav">
            <li><a href="dashboard.html">Dashboard</a></li>
            <li><a href="loans.html">Mis Préstamos</a></li>
            <li><a href="reservations.html">Reservas</a></li>
            <li><a href="profile.html">Mi Perfil</a></li>
            <li><a href="sanctions.html">Sanciones</a></li>
            <li><a href="../public/login.html">Cerrar Sesión</a></li>
          </ul>
        </nav>

        <button class="navbar-toggle" onclick="toggleMobileMenu()">
          <span></span>
          <span></span>
          <span></span>
        </button>

        <div class="navbar-mobile-menu" id="mobileMenu">
          <ul class="navbar-nav">
            <li><a href="dashboard.html">Dashboard</a></li>
            <li><a href="loans.html">Mis Préstamos</a></li>
            <li><a href="reservations.html">Reservas</a></li>
            <li><a href="profile.html">Mi Perfil</a></li>
            <li><a href="sanctions.html">Sanciones</a></li>
            <li><a href="../public/login.html">Cerrar Sesión</a></li>
          </ul>
        </div>
      </div>
    </header>

    <main style="max-width: 1000px; margin: 2rem auto; padding: 0 1rem">
      <h1>Mis Reservas</h1>

      <!-- Summary Cards -->
      <div class="reservations-summary">
        <div
          class="summary-card"
          style="
            --card-color: var(--primary-color);
            --icon-bg: rgba(0, 87, 144, 0.1);
          "
        >
          <div class="summary-icon">
            <svg
              width="28"
              height="28"
              viewBox="0 0 24 24"
              fill="none"
              stroke="var(--primary-color)"
              stroke-width="2"
            >
              <path
                d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"
              ></path>
            </svg>
          </div>
          <div class="summary-content">
            <h3>3</h3>
            <p>Reservas Activas</p>
          </div>
        </div>

        <div
          class="summary-card"
          style="
            --card-color: var(--success-color);
            --icon-bg: rgba(16, 185, 129, 0.1);
          "
        >
          <div class="summary-icon">
            <svg
              width="28"
              height="28"
              viewBox="0 0 24 24"
              fill="none"
              stroke="var(--success-color)"
              stroke-width="2"
            >
              <polyline points="20 6 9 17 4 12"></polyline>
            </svg>
          </div>
          <div class="summary-content">
            <h3>1</h3>
            <p>Lista para Recoger</p>
          </div>
        </div>

        <div
          class="summary-card"
          style="
            --card-color: var(--warning-color);
            --icon-bg: rgba(245, 158, 11, 0.1);
          "
        >
          <div class="summary-icon">
            <svg
              width="28"
              height="28"
              viewBox="0 0 24 24"
              fill="none"
              stroke="var(--warning-color)"
              stroke-width="2"
            >
              <circle cx="12" cy="12" r="10"></circle>
              <polyline points="12 6 12 12 16 14"></polyline>
            </svg>
          </div>
          <div class="summary-content">
            <h3>1</h3>
            <p>En Espera</p>
          </div>
        </div>

        <div
          class="summary-card"
          style="
            --card-color: var(--error-color);
            --icon-bg: rgba(239, 68, 68, 0.1);
          "
        >
          <div class="summary-icon">
            <svg
              width="28"
              height="28"
              viewBox="0 0 24 24"
              fill="none"
              stroke="var(--error-color)"
              stroke-width="2"
            >
              <circle cx="12" cy="12" r="10"></circle>
              <line x1="15" y1="9" x2="9" y2="15"></line>
              <line x1="9" y1="9" x2="15" y2="15"></line>
            </svg>
          </div>
          <div class="summary-content">
            <h3>1</h3>
            <p>Expirada</p>
          </div>
        </div>
      </div>

      <div class="card">
        <div
          class="card-header"
          style="display: flex; align-items: center; gap: 0.75rem"
        >
          <svg
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>
          </svg>
          Reservas Activas
        </div>
        <div class="card-body">
          <!-- Reservation 1 - Ready to pickup -->
          <div class="reservation-card ready">
            <div class="reservation-grid">
              <div>
                <h3
                  style="
                    margin: 0 0 0.5rem 0;
                    font-size: 1.25rem;
                    display: flex;
                    align-items: center;
                    gap: 0.5rem;
                  "
                >
                  <svg
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="var(--success-color)"
                    stroke-width="2"
                  >
                    <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                    <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
                  </svg>
                  Sapiens: De animales a dioses
                </h3>
                <p style="margin: 0 0 1rem 0; color: var(--text-secondary)">
                  📚 Yuval Noah Harari
                </p>

                <div class="reservation-details">
                  <div class="detail-item">
                    <strong>📅 Fecha de Reserva</strong>
                    20/09/2023 14:30
                  </div>
                  <div class="detail-item">
                    <strong>⏰ Vencimiento</strong>
                    23/09/2023 14:30
                  </div>
                  <div class="detail-item">
                    <strong>🎯 Posición en Cola</strong>
                    1 de 3
                  </div>
                </div>

                <div class="status-alert ready">
                  <svg
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="white"
                    stroke-width="2.5"
                  >
                    <circle cx="12" cy="12" r="10"></circle>
                    <polyline points="12 6 12 12 16 14"></polyline>
                  </svg>
                  <span>Tiempo restante: 2 horas 15 minutos</span>
                </div>

                <p
                  style="
                    margin: 0;
                    font-size: 0.9rem;
                    color: var(--text-secondary);
                    padding: 0.75rem;
                    background: var(--surface-color);
                    border-radius: 8px;
                  "
                >
                  💡 <strong>Recuerda:</strong> Recoger el libro en la
                  biblioteca antes del vencimiento. Si no lo haces, la reserva
                  será cancelada automáticamente.
                </p>
              </div>
              <div style="text-align: right">
                <button
                  class="btn btn-error"
                  onclick="simulateCancelReservation('Sapiens')"
                  style="margin-bottom: 0.5rem; width: 100%"
                >
                  ❌ Cancelar Reserva
                </button>
                <p
                  style="
                    margin: 0;
                    font-size: 0.85rem;
                    padding: 0.5rem;
                    background: rgba(16, 185, 129, 0.1);
                    color: var(--success-color);
                    border-radius: 6px;
                    font-weight: 500;
                  "
                >
                  ✓ Disponible para recoger
                </p>
              </div>
            </div>
          </div>

          <!-- Reservation 2 - Waiting -->
          <div class="reservation-card waiting">
            <div class="reservation-grid">
              <div>
                <h3
                  style="
                    margin: 0 0 0.5rem 0;
                    font-size: 1.25rem;
                    display: flex;
                    align-items: center;
                    gap: 0.5rem;
                  "
                >
                  <svg
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="var(--warning-color)"
                    stroke-width="2"
                  >
                    <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                    <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
                  </svg>
                  El código Da Vinci
                </h3>
                <p style="margin: 0 0 1rem 0; color: var(--text-secondary)">
                  📚 Dan Brown
                </p>

                <div class="reservation-details">
                  <div class="detail-item">
                    <strong>📅 Fecha de Reserva</strong>
                    18/09/2023 10:15
                  </div>
                  <div class="detail-item">
                    <strong>⏰ Vencimiento</strong>
                    21/09/2023 10:15
                  </div>
                  <div class="detail-item">
                    <strong>🎯 Posición en Cola</strong>
                    2 de 5
                  </div>
                </div>

                <div class="status-alert waiting">
                  <svg
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="white"
                    stroke-width="2.5"
                  >
                    <circle cx="12" cy="12" r="10"></circle>
                    <polyline points="12 6 12 12 16 14"></polyline>
                  </svg>
                  <span>Tiempo restante: 1 día 4 horas</span>
                </div>

                <p
                  style="
                    margin: 0;
                    font-size: 0.9rem;
                    color: var(--text-secondary);
                    padding: 0.75rem;
                    background: var(--surface-color);
                    border-radius: 8px;
                  "
                >
                  ⏳ <strong>En espera:</strong> Estás en la posición 2 de la
                  cola de espera. Serás notificado cuando el libro esté
                  disponible.
                </p>
              </div>
              <div style="text-align: right">
                <button
                  class="btn btn-error"
                  onclick="simulateCancelReservation('El código Da Vinci')"
                  style="margin-bottom: 0.5rem; width: 100%"
                >
                  ❌ Cancelar Reserva
                </button>
                <p
                  style="
                    margin: 0;
                    font-size: 0.85rem;
                    padding: 0.5rem;
                    background: rgba(245, 158, 11, 0.1);
                    color: var(--warning-color);
                    border-radius: 6px;
                    font-weight: 500;
                  "
                >
                  ⏳ En lista de espera
                </p>
              </div>
            </div>
          </div>

          <!-- Reservation 3 - Expired -->
          <div class="reservation-card expired">
            <div class="reservation-grid">
              <div>
                <h3
                  style="
                    margin: 0 0 0.5rem 0;
                    font-size: 1.25rem;
                    display: flex;
                    align-items: center;
                    gap: 0.5rem;
                  "
                >
                  <svg
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="var(--error-color)"
                    stroke-width="2"
                  >
                    <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                    <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
                  </svg>
                  Breve historia del tiempo
                </h3>
                <p style="margin: 0 0 1rem 0; color: var(--text-secondary)">
                  📚 Stephen Hawking
                </p>

                <div class="reservation-details">
                  <div class="detail-item">
                    <strong>📅 Fecha de Reserva</strong>
                    15/09/2023 16:45
                  </div>
                  <div class="detail-item">
                    <strong>⏰ Vencimiento</strong>
                    18/09/2023 16:45
                  </div>
                  <div class="detail-item">
                    <strong>🎯 Posición en Cola</strong>
                    1 de 2
                  </div>
                </div>

                <div class="status-alert expired">
                  <svg
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="white"
                    stroke-width="2.5"
                  >
                    <circle cx="12" cy="12" r="10"></circle>
                    <line x1="15" y1="9" x2="9" y2="15"></line>
                    <line x1="9" y1="9" x2="15" y2="15"></line>
                  </svg>
                  <span>Reserva expirada - Libro disponible</span>
                </div>

                <p
                  style="
                    margin: 0;
                    font-size: 0.9rem;
                    color: var(--text-secondary);
                    padding: 0.75rem;
                    background: var(--surface-color);
                    border-radius: 8px;
                  "
                >
                  ℹ️ <strong>Información:</strong> Esta reserva ha expirado. El
                  libro está disponible para préstamo directo.
                </p>
              </div>
              <div style="text-align: right">
                <button
                  class="btn btn-primary"
                  onclick="window.location.href='../public/book-detail.html?id=3'"
                  style="margin-bottom: 0.5rem; width: 100%"
                >
                  📖 Ver Libro
                </button>
                <p
                  style="
                    margin: 0;
                    font-size: 0.85rem;
                    padding: 0.5rem;
                    background: rgba(239, 68, 68, 0.1);
                    color: var(--error-color);
                    border-radius: 6px;
                    font-weight: 500;
                  "
                >
                  ⚠️ Reserva expirada
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Reservation Rules -->
      <div class="card" style="margin-top: 2rem">
        <div
          class="card-header"
          style="display: flex; align-items: center; gap: 0.75rem"
        >
          <svg
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path d="M9 12l2 2 4-4"></path>
            <circle cx="12" cy="12" r="10"></circle>
          </svg>
          Reglas de Reservas
        </div>
        <div class="card-body">
          <div class="rules-grid">
            <div class="rule-section">
              <h4>
                <svg
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <circle cx="12" cy="12" r="10"></circle>
                  <polyline points="12 6 12 12 16 14"></polyline>
                </svg>
                Tiempo de Validez
              </h4>
              <ul>
                <li>⏱️ Las reservas son válidas por 48 horas</li>
                <li>📍 Debes recoger el libro antes del vencimiento</li>
                <li>⚠️ Si no lo haces, pierdes la prioridad</li>
              </ul>
            </div>
            <div class="rule-section">
              <h4>
                <svg
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                  <circle cx="9" cy="7" r="4"></circle>
                  <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                  <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                </svg>
                Lista de Espera
              </h4>
              <ul>
                <li>📋 Si hay más reservas que ejemplares disponibles</li>
                <li>🔢 Se forma una cola de espera</li>
                <li>🔔 Serás notificado cuando llegue tu turno</li>
              </ul>
            </div>
            <div class="rule-section">
              <h4>
                <svg
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <circle cx="12" cy="12" r="10"></circle>
                  <line x1="15" y1="9" x2="9" y2="15"></line>
                  <line x1="9" y1="9" x2="15" y2="15"></line>
                </svg>
                Cancelación
              </h4>
              <ul>
                <li>✅ Puedes cancelar tu reserva en cualquier momento</li>
                <li>❌ Si cancelas, pierdes tu lugar en la cola</li>
                <li>✔️ No hay penalización por cancelación</li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <!-- Reservation History -->
      <div class="card" style="margin-top: 2rem">
        <div
          class="card-header"
          style="display: flex; align-items: center; gap: 0.75rem"
        >
          <svg
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <circle cx="12" cy="12" r="10"></circle>
            <polyline points="12 6 12 12 16 14"></polyline>
          </svg>
          Historial de Reservas (Últimos 30 días)
        </div>
        <div class="card-body">
          <div class="table-container">
            <table class="table">
              <thead>
                <tr>
                  <th>Libro</th>
                  <th>Fecha de Reserva</th>
                  <th>Estado</th>
                  <th>Acción</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><strong>Cien años de soledad</strong></td>
                  <td>10/09/2023</td>
                  <td>
                    <span
                      class="badge"
                      style="
                        background: rgba(16, 185, 129, 0.1);
                        color: var(--success-color);
                        padding: 0.25rem 0.75rem;
                        border-radius: 12px;
                        font-size: 0.85rem;
                      "
                    >
                      ✓ Completada
                    </span>
                  </td>
                  <td>Convertida a préstamo</td>
                </tr>
                <tr>
                  <td><strong>Historia de Colombia</strong></td>
                  <td>05/09/2023</td>
                  <td>
                    <span
                      class="badge"
                      style="
                        background: rgba(239, 68, 68, 0.1);
                        color: var(--error-color);
                        padding: 0.25rem 0.75rem;
                        border-radius: 12px;
                        font-size: 0.85rem;
                      "
                    >
                      ✗ Expirada
                    </span>
                  </td>
                  <td>No recogida</td>
                </tr>
                <tr>
                  <td><strong>Rayuela</strong></td>
                  <td>28/08/2023</td>
                  <td>
                    <span
                      class="badge"
                      style="
                        background: rgba(16, 185, 129, 0.1);
                        color: var(--success-color);
                        padding: 0.25rem 0.75rem;
                        border-radius: 12px;
                        font-size: 0.85rem;
                      "
                    >
                      ✓ Completada
                    </span>
                  </td>
                  <td>Convertida a préstamo</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </main>

    <!-- Toast Container -->
    <div id="toast-container"></div>

    <script src="../../assets/js/main.js"></script>
    <script>
      function simulateCancelReservation(bookTitle) {
        if (
          confirm(`¿Estás seguro de cancelar la reserva de "${bookTitle}"?`)
        ) {
          showToast(
            `Reserva de "${bookTitle}" cancelada exitosamente`,
            'success'
          );
        }
      }
    </script>
  </body>
</html>
